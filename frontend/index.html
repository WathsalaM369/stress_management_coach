<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stress Management Coach - Stress-Free Mood Tracker</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ§  Stress Management Coach</h1>
            <p class="subtitle">Express your feelings without words</p>
            <div class="user-info" id="userInfo" style="display: none;">
                <span id="usernameDisplay"></span>
                <button onclick="logout()" class="btn-logout">Logout</button>
            </div>
        </header>

        <!-- Login/Register Section -->
        <section class="auth-section" id="authSection">
            <div class="auth-container">
                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="showAuthTab('login')">Login</button>
                    <button class="auth-tab" onclick="showAuthTab('register')">Register</button>
                </div>

                <!-- Login Form -->
                <div class="auth-form" id="loginForm">
                    <h2>Welcome Back</h2>
                    <form onsubmit="login(event)">
                        <div class="form-group">
                            <label for="loginUsername">Username:</label>
                            <input type="text" id="loginUsername" required>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password:</label>
                            <input type="password" id="loginPassword" required>
                        </div>
                        <button type="submit" class="btn-primary">Login</button>
                    </form>
                    <p class="auth-switch">
                        Don't have an account? 
                        <a href="#" onclick="showAuthTab('register')">Register here</a>
                    </p>
                </div>

                <!-- Register Form -->
                <div class="auth-form" id="registerForm" style="display: none;">
                    <h2>Create Account</h2>
                    <form onsubmit="register(event)">
                        <div class="form-group">
                            <label for="registerUsername">Username:</label>
                            <input type="text" id="registerUsername" required>
                        </div>
                        <div class="form-group">
                            <label for="registerEmail">Email (optional):</label>
                            <input type="email" id="registerEmail">
                        </div>
                        <div class="form-group">
                            <label for="registerPassword">Password:</label>
                            <input type="password" id="registerPassword" required>
                        </div>
                        <button type="submit" class="btn-primary">Register</button>
                    </form>
                    <p class="auth-switch">
                        Already have an account? 
                        <a href="#" onclick="showAuthTab('login')">Login here</a>
                    </p>
                </div>

                <!-- Quick Start (Anonymous) -->
                <div class="anonymous-option">
                    <hr>
                    <p>Or continue without account:</p>
                    <button onclick="continueAsGuest()" class="btn-secondary">
                        ğŸš€ Continue as Guest
                    </button>
                    <small>Your data will be saved temporarily</small>
                </div>
            </div>
        </section>

        <div class="main-content" id="mainContent" style="display: none;">
            <!-- Game Section -->
            <section class="game-section" id="gameSection">
                <h2>ğŸ® Pop Your Mood Bubble</h2>
                <p>Click the bubble that matches how you feel</p>
                
                <div class="bubble-container" id="bubbleGame">
                    <!-- Bubbles will be generated here -->
                </div>
                
                <div class="game-instructions">
                    <p>ğŸ’¡ <strong>No typing needed!</strong> Just pop the bubble that feels right</p>
                </div>
            </section>

            <!-- Quick Selection Section -->
            <section class="quick-selection" id="quickSelection">
                <h2>ğŸš€ Or choose quickly:</h2>
                
                <!-- Emoji Selector -->
                <div class="selector-group">
                    <h3>How are you feeling?</h3>
                    <div class="emoji-selector">
                        <div class="emoji-option" data-emoji="ğŸ˜Š" data-stress="1.5">
                            <span>ğŸ˜Š</span>
                            
                        </div>
                        <div class="emoji-option" data-emoji="ğŸ™‚" data-stress="2.5">
                            <span>ğŸ™‚</span>
                            
                        </div>
                        <div class="emoji-option" data-emoji="ğŸ˜" data-stress="4.0">
                            <span>ğŸ˜</span>
                            
                        </div>
                        <div class="emoji-option" data-emoji="ğŸ˜•" data-stress="5.5">
                            <span>ğŸ˜•</span>
                            
                        </div>
                        <div class="emoji-option" data-emoji="ğŸ˜“" data-stress="7.0">
                            <span>ğŸ˜“</span>
                            
                        </div>
                        <div class="emoji-option" data-emoji="ğŸ˜¢" data-stress="8.5">
                            <span>ğŸ˜¢</span>
                            
                        </div>
                    </div>
                </div>

                <!-- Scene Selector -->
                <div class="selector-group">
                    <h3>Where does this fit your mood?</h3>
                    <div class="scene-selector">
                        <div class="scene-option" data-scene="beach" data-stress="1.5">
                            <div class="scene-visual beach"></div>
                            <span>Beach</span>
                            <small>Relaxed</small>
                        </div>
                        <div class="scene-option" data-scene="nature" data-stress="2.0">
                            <div class="scene-visual nature"></div>
                            <span>Nature</span>
                            <small>Calm</small>
                        </div>
                        <div class="scene-option" data-scene="office" data-stress="6.0">
                            <div class="scene-visual office"></div>
                            <span>Office</span>
                            <small>Busy</small>
                        </div>
                        <div class="scene-option" data-scene="traffic" data-stress="7.5">
                            <div class="scene-visual traffic"></div>
                            <span>Traffic</span>
                            <small>Frustrated</small>
                        </div>
                    </div>
                </div>

                <!-- Color Wheel -->
                <div class="selector-group">
                    <h3>Pick your mood color</h3>
                    <div class="color-wheel">
                        <div class="color-option" data-color="#87CEEB" data-stress="2.0" style="background: #87CEEB">
                            <span>Calm</span>
                        </div>
                        <div class="color-option" data-color="#98FB98" data-stress="3.0" style="background: #98FB98">
                            <span>Balanced</span>
                        </div>
                        <div class="color-option" data-color="#FFD700" data-stress="6.0" style="background: #FFD700">
                            <span>Uneasy</span>
                        </div>
                        <div class="color-option" data-color="#FFA500" data-stress="7.5" style="background: #FFA500">
                            <span>Stressed</span>
                        </div>
                        <div class="color-option" data-color="#FF4500" data-stress="9.0" style="background: #FF4500">
                            <span>Overwhelmed</span>
                        </div>
                    </div>
                </div>
            </section>


            <!-- Add this after the quick selection section and before results section -->
<!-- Enhanced Comprehensive Assessment Section -->
<section class="comprehensive-assessment" id="comprehensiveAssessment" style="display: none;">
    <h2>ğŸ¯ Let's Understand Your Stress Better</h2>
    <p>Complete this quick colorful assessment for a more accurate analysis</p>
    
    <div class="assessment-progress">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <span id="progressText">1/5</span>
    </div>

    <!-- Section 1: Physical Symptoms -->
    <div class="assessment-section active" id="sectionPhysical">
        <h3>ğŸ” How is your body feeling?</h3>
        <p>Select any physical sensations you're experiencing</p>
        
        <div class="symptom-grid">
            <div class="symptom-option" data-symptom="headache" data-weight="2">
                <div class="symptom-icon">ğŸ˜«</div>
                <span>Headache</span>
            </div>
            <div class="symptom-option" data-symptom="tension" data-weight="2">
                <div class="symptom-icon">ğŸ’ª</div>
                <span>Muscle Tension</span>
            </div>
            <div class="symptom-option" data-symptom="heart" data-weight="3">
                <div class="symptom-icon">ğŸ’“</div>
                <span>Racing Heart</span>
            </div>
            <div class="symptom-option" data-symptom="stomach" data-weight="2">
                <div class="symptom-icon">ğŸ½ï¸</div>
                <span>Upset Stomach</span>
            </div>
            <div class="symptom-option" data-symptom="fatigue" data-weight="1">
                <div class="symptom-icon">ğŸ˜´</div>
                <span>Fatigue</span>
            </div>
            <div class="symptom-option" data-symptom="breathing" data-weight="3">
                <div class="symptom-icon">ğŸŒ¬ï¸</div>
                <span>Fast Breathing</span>
            </div>
            <!-- NEW: Additional Physical Symptoms -->
            <div class="symptom-option" data-symptom="sleep_issues" data-weight="3">
                <div class="symptom-icon">ğŸ’¤</div>
                <span>Sleep Problems</span>
            </div>
            <div class="symptom-option" data-symptom="appetite_changes" data-weight="2">
                <div class="symptom-icon">ğŸ</div>
                <span>Appetite Changes</span>
            </div>
            <div class="symptom-option" data-symptom="chest_tightness" data-weight="3">
                <div class="symptom-icon">ğŸ’”</div>
                <span>Chest Tightness</span>
            </div>
            <div class="symptom-option" data-symptom="dizziness" data-weight="2">
                <div class="symptom-icon">ğŸŒ€</div>
                <span>Dizziness</span>
            </div>
        </div>
        
        <button class="btn-next" onclick="nextSection('sectionPhysical', 'sectionEmotional')">Next â†’</button>
    </div>

    <!-- Section 2: Emotional State -->
    <div class="assessment-section" id="sectionEmotional">
        <h3>ğŸ’– What emotions are present?</h3>
        <p>Choose emotions you're feeling right now</p>
        
        <div class="emotion-grid">
            <div class="emotion-option" data-emotion="anxious" data-weight="3">
                <div class="emotion-color anxious"></div>
                <span>Anxious</span>
            </div>
            <div class="emotion-option" data-emotion="overwhelmed" data-weight="4">
                <div class="emotion-color overwhelmed"></div>
                <span>Overwhelmed</span>
            </div>
            <div class="emotion-option" data-emotion="irritable" data-weight="2">
                <div class="emotion-color irritable"></div>
                <span>Irritable</span>
            </div>
            <div class="emotion-option" data-emotion="sad" data-weight="2">
                <div class="emotion-color sad"></div>
                <span>Sad</span>
            </div>
            <div class="emotion-option" data-emotion="angry" data-weight="3">
                <div class="emotion-color angry"></div>
                <span>Angry</span>
            </div>
            <div class="emotion-option" data-emotion="numb" data-weight="2">
                <div class="emotion-color numb"></div>
                <span>Numb</span>
            </div>
            <!-- NEW: Additional Emotional States -->
            <div class="emotion-option" data-emotion="hopeless" data-weight="4">
                <div class="emotion-color hopeless"></div>
                <span>Hopeless</span>
            </div>
            <div class="emotion-option" data-emotion="guilty" data-weight="2">
                <div class="emotion-color guilty"></div>
                <span>Guilty</span>
            </div>
            <div class="emotion-option" data-emotion="empty" data-weight="3">
                <div class="emotion-color empty"></div>
                <span>Empty</span>
            </div>
            <div class="emotion-option" data-emotion="panic" data-weight="4">
                <div class="emotion-color panic"></div>
                <span>Panic</span>
            </div>
        </div>
        
        <div class="section-nav">
            <button class="btn-prev" onclick="prevSection('sectionEmotional', 'sectionPhysical')">â† Back</button>
            <button class="btn-next" onclick="nextSection('sectionEmotional', 'sectionCognitive')">Next â†’</button>
        </div>
    </div>

    <!-- Section 3: Cognitive Symptoms -->
    <div class="assessment-section" id="sectionCognitive">
        <h3>ğŸ§  How's your thinking?</h3>
        <p>Select any thinking patterns you're noticing</p>
        
        <div class="cognitive-grid">
            <div class="cognitive-option" data-cognitive="racing" data-weight="3">
                <div class="cognitive-icon">ğŸŒ€</div>
                <span>Racing Thoughts</span>
            </div>
            <div class="cognitive-option" data-cognitive="worry" data-weight="3">
                <div class="cognitive-icon">ğŸ˜Ÿ</div>
                <span>Constant Worry</span>
            </div>
            <div class="cognitive-option" data-cognitive="focus" data-weight="2">
                <div class="cognitive-icon">ğŸ¯</div>
                <span>Poor Focus</span>
            </div>
            <div class="cognitive-option" data-cognitive="forgetful" data-weight="2">
                <div class="cognitive-icon">ğŸ¤”</div>
                <span>Forgetfulness</span>
            </div>
            <div class="cognitive-option" data-cognitive="indecisive" data-weight="2">
                <div class="cognitive-icon">âš–ï¸</div>
                <span>Indecisive</span>
            </div>
            <div class="cognitive-option" data-cognitive="negative" data-weight="3">
                <div class="cognitive-icon">â˜ï¸</div>
                <span>Negative Thoughts</span>
            </div>
            <!-- NEW: Additional Cognitive Patterns -->
            <div class="cognitive-option" data-cognitive="catastrophizing" data-weight="3">
                <div class="cognitive-icon">ğŸŒªï¸</div>
                <span>Worst-Case Thinking</span>
            </div>
            <div class="cognitive-option" data-cognitive="self_critical" data-weight="2">
                <div class="cognitive-icon">ğŸ‘¤</div>
                <span>Self-Critical</span>
            </div>
            <div class="cognitive-option" data-cognitive="memory_issues" data-weight="2">
                <div class="cognitive-icon">ğŸ“</div>
                <span>Memory Problems</span>
            </div>
            <div class="cognitive-option" data-cognitive="confusion" data-weight="2">
                <div class="cognitive-icon">â“</div>
                <span>Mental Confusion</span>
            </div>
        </div>
        
        <div class="section-nav">
            <button class="btn-prev" onclick="prevSection('sectionCognitive', 'sectionEmotional')">â† Back</button>
            <button class="btn-next" onclick="nextSection('sectionCognitive', 'sectionLifestyle')">Next â†’</button>
        </div>
    </div>

    <!-- NEW Section 4: Lifestyle Impact -->
    <div class="assessment-section" id="sectionLifestyle">
        <h3>ğŸŒŸ Daily Life Impact</h3>
        <p>How is stress affecting your daily life?</p>
        
        <div class="lifestyle-grid">
            <!-- Sleep Patterns -->
            <div class="lifestyle-group">
                <h4>ğŸ’¤ How has your sleep been?</h4>
                <div class="lifestyle-options">
                    <div class="lifestyle-option" data-category="sleep" data-value="trouble_sleeping" data-weight="3">
                        <div class="lifestyle-icon">ğŸ˜´</div>
                        <span>Trouble falling asleep</span>
                    </div>
                    <div class="lifestyle-option" data-category="sleep" data-value="waking_night" data-weight="2">
                        <div class="lifestyle-icon">â°</div>
                        <span>Waking up at night</span>
                    </div>
                    <div class="lifestyle-option" data-category="sleep" data-value="early_waking" data-weight="2">
                        <div class="lifestyle-icon">ğŸŒ…</div>
                        <span>Waking up too early</span>
                    </div>
                    <div class="lifestyle-option" data-category="sleep" data-value="oversleeping" data-weight="1">
                        <div class="lifestyle-icon">ğŸ›Œ</div>
                        <span>Sleeping too much</span>
                    </div>
                    <div class="lifestyle-option" data-category="sleep" data-value="normal_sleep" data-weight="0">
                        <div class="lifestyle-icon">âœ…</div>
                        <span>Sleeping normally</span>
                    </div>
                </div>
            </div>
            
            <!-- Appetite Changes -->
            <div class="lifestyle-group">
                <h4>ğŸ Any appetite changes?</h4>
                <div class="lifestyle-options">
                    <div class="lifestyle-option" data-category="appetite" data-value="eating_less" data-weight="2">
                        <div class="lifestyle-icon">ğŸ½ï¸</div>
                        <span>Eating less</span>
                    </div>
                    <div class="lifestyle-option" data-category="appetite" data-value="eating_more" data-weight="1">
                        <div class="lifestyle-icon">ğŸ•</div>
                        <span>Eating more</span>
                    </div>
                    <div class="lifestyle-option" data-category="appetite" data-value="no_change" data-weight="0">
                        <div class="lifestyle-icon">âš–ï¸</div>
                        <span>No changes</span>
                    </div>
                </div>
            </div>
            
            <!-- Social Behavior -->
            <div class="lifestyle-group">
                <h4>ğŸ‘¥ Social interactions?</h4>
                <div class="lifestyle-options">
                    <div class="lifestyle-option" data-category="social" data-value="withdrawing" data-weight="2">
                        <div class="lifestyle-icon">ğŸš¶â€â™‚ï¸</div>
                        <span>Withdrawing from others</span>
                    </div>
                    <div class="lifestyle-option" data-category="social" data-value="seeking_people" data-weight="0">
                        <div class="lifestyle-icon">ğŸ‘¥</div>
                        <span>Seeking more contact</span>
                    </div>
                    <div class="lifestyle-option" data-category="social" data-value="no_change" data-weight="0">
                        <div class="lifestyle-icon">ğŸ˜Š</div>
                        <span>No changes</span>
                    </div>
                </div>
            </div>
            
            <!-- Daily Functioning -->
            <div class="lifestyle-group">
                <h4>ğŸ“Š Daily responsibilities?</h4>
                <div class="lifestyle-options">
                    <div class="lifestyle-option" data-category="functioning" data-value="neglecting" data-weight="3">
                        <div class="lifestyle-icon">ğŸ“‰</div>
                        <span>Neglecting tasks</span>
                    </div>
                    <div class="lifestyle-option" data-category="functioning" data-value="managing" data-weight="1">
                        <div class="lifestyle-icon">ğŸ“ˆ</div>
                        <span>Managing okay</span>
                    </div>
                    <div class="lifestyle-option" data-category="functioning" data-value="no_impact" data-weight="0">
                        <div class="lifestyle-icon">âœ…</div>
                        <span>No impact</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section-nav">
            <button class="btn-prev" onclick="prevSection('sectionLifestyle', 'sectionCognitive')">â† Back</button>
            <button class="btn-next" onclick="nextSection('sectionLifestyle', 'sectionContext')">Next â†’</button>
        </div>
    </div>

    <!-- Section 5: Context & Duration (Updated) -->
    <div class="assessment-section" id="sectionContext">
        <h3>â° Context & Duration</h3>
        <p>Help us understand your stress better</p>
        
        <div class="context-grid">
            <div class="context-group">
                <h4>How long have you felt this way?</h4>
                <div class="duration-options">
                    <div class="duration-option" data-duration="minutes" data-weight="1">
                        <div class="duration-icon">ğŸ•</div>
                        <span>Just started</span>
                    </div>
                    <div class="duration-option" data-duration="hours" data-weight="2">
                        <div class="duration-icon">ğŸ•’</div>
                        <span>Few hours</span>
                    </div>
                    <div class="duration-option" data-duration="day" data-weight="3">
                        <div class="duration-icon">ğŸ•”</div>
                        <span>All day</span>
                    </div>
                    <div class="duration-option" data-duration="days" data-weight="4">
                        <div class="duration-icon">ğŸ•—</div>
                        <span>Several days</span>
                    </div>
                    <div class="duration-option" data-duration="weeks" data-weight="5">
                        <div class="duration-icon">ğŸ“…</div>
                        <span>Weeks</span>
                    </div>
                </div>
            </div>
            
            <div class="context-group">
                <h4>Main stress source?</h4>
                <div class="source-options">
                    <div class="source-option" data-source="work" data-weight="3">
                        <div class="source-icon">ğŸ’¼</div>
                        <span>Work</span>
                    </div>
                    <div class="source-option" data-source="relationships" data-weight="3">
                        <div class="source-icon">ğŸ‘¥</div>
                        <span>Relationships</span>
                    </div>
                    <div class="source-option" data-source="health" data-weight="4">
                        <div class="source-icon">ğŸ¥</div>
                        <span>Health</span>
                    </div>
                    <div class="source-option" data-source="financial" data-weight="3">
                        <div class="source-icon">ğŸ’°</div>
                        <span>Financial</span>
                    </div>
                    <div class="source-option" data-source="academic" data-weight="2">
                        <div class="source-icon">ğŸ“š</div>
                        <span>Academic</span>
                    </div>
                    <div class="source-option" data-source="uncertainty" data-weight="3">
                        <div class="source-icon">â“</div>
                        <span>Uncertainty</span>
                    </div>
                    <!-- NEW: Additional Stress Sources -->
                    <div class="source-option" data-source="family" data-weight="3">
                        <div class="source-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                        <span>Family</span>
                    </div>
                    <div class="source-option" data-source="life_changes" data-weight="3">
                        <div class="source-icon">ğŸ”„</div>
                        <span>Life Changes</span>
                    </div>
                </div>
            </div>
            
            <!-- NEW: Coping Mechanisms -->
            <div class="context-group">
                <h4>ğŸ›¡ï¸ How are you coping?</h4>
                <div class="coping-options">
                    <div class="coping-option" data-coping="exercise" data-weight="-1">
                        <div class="coping-icon">ğŸƒâ€â™‚ï¸</div>
                        <span>Exercise</span>
                    </div>
                    <div class="coping-option" data-coping="talking" data-weight="-1">
                        <div class="coping-icon">ğŸ’¬</div>
                        <span>Talking to others</span>
                    </div>
                    <div class="coping-option" data-coping="relaxation" data-weight="-1">
                        <div class="coping-icon">ğŸ§˜â€â™€ï¸</div>
                        <span>Relaxation</span>
                    </div>
                    <div class="coping-option" data-coping="hobbies" data-weight="-1">
                        <div class="coping-icon">ğŸ¨</div>
                        <span>Hobbies</span>
                    </div>
                    <div class="coping-option" data-coping="nothing" data-weight="2">
                        <div class="coping-icon">ğŸ˜”</div>
                        <span>Not coping well</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section-nav">
            <button class="btn-prev" onclick="prevSection('sectionContext', 'sectionLifestyle')">â† Back</button>
            <button class="btn-next" onclick="calculateComprehensiveScore()">Get Analysis â†’</button>
        </div>
    </div>
</section>

            <!-- Results Section -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <h2>ğŸ“Š Your Stress Analysis</h2>
                <div class="results-content">
                    <div class="stress-level">
                        <span id="levelBadge" class="level-badge">Low</span>
                    </div>
                    
                    <div class="score-display">
                        <span id="stressScore">0.0</span>/10
                    </div>
                    
                    <div class="explanation">
                        <p id="explanationText">Your analysis will appear here...</p>
                    </div>
                    
                    <div class="analysis-details">
                        <div class="detail-item">
                            <strong>Input Method:</strong> <span id="inputMethod">-</span>
                        </div>
                        <div class="detail-item">
                            <strong>Mood Label:</strong> <span id="moodLabel">-</span>
                        </div>
                        <div class="detail-item" id="trendItem" style="display: none;">
                            <strong>Trend:</strong> <span id="trendValue">-</span>
                        </div>
                    </div>

                    <div class="chart-container" id="chartContainer">
                        <div class="chart-wrapper">
                            <canvas id="historyChart"></canvas>
                        </div>
                        <div class="chart-loading" id="chartLoading" style="display: none;">
                            ğŸ“Š Loading your history...
                        </div>
                    </div>

                    <div class="stats-container" id="statsContainer" style="display: none;">
                        <!-- Statistics will be loaded here dynamically -->
                    </div>

                    <button class="btn-secondary" onclick="resetAnalysis()">
                        ğŸ”„ Analyze Again
                    </button>
                    
                    <!-- ADD THIS NEW BUTTON -->
                    <button class="btn-primary" onclick="showMotivationPage()" style="margin-top: 10px;">
                        ğŸ’« Get Motivational Support
                    </button>
                </div>
            </section>

           <!-- Motivation Section -->
<section class="motivation-section" id="motivationSection" style="display: none;">
    <div class="motivation-container">
        <!-- Header Section -->
        <div class="motivation-header">
            <div class="header-content">
                <div class="coach-avatar avatar-animation" id="coachAvatar">ğŸ‘©</div>
                <h2>Your Personal Motivation Coach</h2>
                <div class="stress-badge" id="stressBadge">Stress Level: <span id="motivationStressLevel">0</span>/10</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="motivation-content">
            <!-- Voice Selection -->
            <div class="voice-selection">
                
                <div class="voice-options">
                    <div class="voice-option active" data-voice="female" onclick="selectVoice('female')">
                        <span class="voice-icon">ğŸ‘©</span>
                        <strong>Female Voice</strong>
                        <small>Warm & comforting</small>
                    </div>
                </div>
            </div>

            <!-- Motivational Message -->
            <div class="message-container">
                <div class="typing-indicator" id="typingIndicator">
                    Your coach is crafting a personalized message...
                </div>
                <div class="motivation-text" id="motivationText">
                    <!-- Message will be inserted here -->
                </div>
            </div>

            <!-- Audio Controls -->
            <div class="audio-controls">
                <button class="play-button" id="playButton" onclick="toggleAudio()" disabled>
                    <span id="playIcon">â–¶ï¸</span>
                    <span id="playText">Play Message</span>
                </button>
                <div class="audio-progress">
                    <span class="progress-time" id="currentTime">0:00</span>
                    <div class="progress-bar-container" id="progressBarContainer">
                        <div class="progress-bar-fill" id="progressBarFill"></div>
                        <div class="progress-bar-handle" id="progressBarHandle"></div>
                    </div>
                    <span class="progress-time" id="durationTime">0:00</span>
                </div>
                <div id="currentVoice" style="font-size: 0.9rem; color: #666;">
                    ğŸ‘© Female
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="actions-grid">
                <div class="action-card" onclick="startBreathingExercise()">
                    <span class="action-icon">ğŸŒ¬ï¸</span>
                    <strong>Breathe</strong>
                    <small>2-minute calm</small>
                </div>
                
                <div class="action-card" onclick="goBackToResults()">
                    <span class="action-icon">ğŸ“Š</span>
                    <strong>Back to Results</strong>
                    <small>View analysis</small>
                </div>
            </div>

            <!-- Breathing Exercise -->
            <div class="breathing-exercise" id="breathingExercise" style="display: none;">
                <h3>ğŸŒ¬ï¸ Breathing Exercise</h3>
                <p>Follow the circle - Breathe in as it expands, out as it contracts</p>
                <div class="breathing-circle" id="breathingCircle">Breathe</div>
                <button class="btn-primary" onclick="stopBreathingExercise()">I feel calmer</button>
            </div>

            <!-- Next Steps -->
           <button class="btn-primary" onclick="generateNewMotivation()" style="
    background: #667eea;
    color: white;
    border: none;
    padding: 16px 32px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1.2rem;
    transition: all 0.3s ease;
    display: block;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    font-weight: 600;
    width: fit-content;
    margin: 0 auto;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
">
    ğŸ”„ Get New Motivation
</button>
                <p style="margin-top: 20px; color: #666; font-size: 1.1rem; text-align: center; font-weight: 500; line-height: 1.5;">
    Your motivation coach is here whenever you need support
</p>
            </div>
        </div>
    </div>
</section>

        <!-- Button to direct activity recommender - Senuthi's part -->
        <div style="text-align: center; margin: 30px 0; display: flex; justify-content: center; gap: 20px; align-items: center;">
            <button onclick="goToActivityRecommender()" 
                    class="btn-primary" 
                    style="background: linear-gradient(135deg, #FF6B9D 0%, #FF1493 100%) !important; 
                        color: white !important;
                        width: auto !important; 
                        display: inline-block; 
                        height: 0.7in; 
                        line-height: 0.7in; 
                        padding: 0 40px; 
                        font-size: 18px; 
                        cursor: pointer; 
                        border: none !important;
                        border-radius: 8px !important;
                        font-weight: bold !important;
                        box-shadow: 0 4px 8px rgba(0,0,0,0.2) !important;
                        flex: 1.5;
                        max-width: 400px;">
                ğŸ¯ Get Activity Recommendations
            </button>

            <!-- Button to direct adaptive scheduler - Manuthi's part -->
            <button onclick="goToTaskScheduler()" 
                    class="btn-primary" 
                    style="background: linear-gradient(135deg, #FF4D6D 0%, #C9184A 100%) !important; 
                        color: white !important;
                        width: auto !important; 
                        display: inline-block; 
                        height: 0.7in; 
                        line-height: 0.7in; 
                        padding: 0 40px; 
                        font-size: 18px; 
                        cursor: pointer; 
                        border: none !important;
                        border-radius: 8px !important;
                        font-weight: bold !important;
                        box-shadow: 0 4px 8px rgba(0,0,0,0.2) !important;
                        flex: 1.5;
                        max-width: 400px;">
                Smart Task Scheduler
            </button>
        </div>
        <!-- end of Buttons section -->


        <footer>
            <p>ğŸ’¡ <strong>Innovation:</strong> No typing or talking required! Perfect for when you're feeling stressed.</p>
        </footer>
    </div>

    <script src="app.js"></script>

    <!-- senuthi's js -->
    <script>
    function goToActivityRecommender() {
        // Get current stress score if available
        const scoreElement = document.getElementById('stressScore');
        const levelElement = document.getElementById('levelBadge');
        
        if (scoreElement && levelElement && scoreElement.textContent !== '0.0') {
            // Pass stress data via URL parameters
            const stressScore = scoreElement.textContent;
            const stressLevel = levelElement.textContent;
            window.location.href = `/activity-recommender?stress_score=${stressScore}&stress_level=${stressLevel}`;
        } else {
            // No assessment yet, just go to the page
            window.location.href = '/activity-recommender';
        }
    }
    </script>

    <script>
        function goToTaskScheduler() {
        // Get current stress score if available
        const scoreElement = document.getElementById('stressScore');
        const levelElement = document.getElementById('levelBadge');
        
        console.log('ğŸ“Š Navigating to Task Scheduler');
        console.log('Score element:', scoreElement?.textContent);
        console.log('Level element:', levelElement?.textContent);
        
        if (scoreElement && levelElement && scoreElement.textContent !== '0.0') {
            // Pass stress data via URL parameters (same as activity recommender)
            const stressScore = scoreElement.textContent.replace('/10', '').trim();
            const stressLevel = levelElement.textContent.trim();
            
            console.log('âœ… Passing stress data:', stressScore, stressLevel);
            window.location.href = `/task-scheduler?stress_score=${stressScore}&stress_level=${stressLevel}`;
        } else {
            console.log('âš ï¸ No assessment data, navigating without parameters');
            // No assessment yet, just go to the page
            window.location.href = '/task-scheduler';
        }
    }
    </script>
</body>
</html>